# Base API settings
ENVIRONMENT=production
HOST=0.0.0.0
PORT=8000
CORS_ORIGINS=https://app.example.com,https://admin.example.com
METRICS_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_CLEANUP_MINUTES=15

# Database
DATABASE_URL=postgresql+psycopg://clean_user:${POSTGRES_PASSWORD}@postgres-primary:5432/cleaning
JOB_HEARTBEAT_REQUIRED=true
JOB_HEARTBEAT_TTL_SECONDS=180

# Redis (distributed rate limiting / caching)
REDIS_URL=redis://redis:6379/0

# Pricing and storage
PRICING_CONFIG_PATH=pricing/economy_v1.json
ORDER_STORAGE_BACKEND=s3
S3_BUCKET=cleaning-uploads
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-west-2
S3_ENDPOINT=https://s3.us-west-2.amazonaws.com
S3_MAX_PAYLOAD_BYTES=52428800  # 50MB cap

# Export / webhooks
EXPORT_MODE=webhook
EXPORT_WEBHOOK_URL=https://ops.example.com/hooks/booking
EXPORT_WEBHOOK_TIMEOUT_SECONDS=5
EXPORT_WEBHOOK_MAX_RETRIES=5
EXPORT_WEBHOOK_BACKOFF_SECONDS=2.0

# Captcha
CAPTCHA_MODE=turnstile
TURNSTILE_SECRET_KEY=

# Retention windows
RETENTION_CHAT_DAYS=30
RETENTION_LEAD_DAYS=365
RETENTION_ENABLE_LEADS=true

# Email delivery
EMAIL_MODE=smtp  # or sendgrid
EMAIL_FROM=no-reply@example.com
EMAIL_FROM_NAME=Cleaning Ops
SENDGRID_API_KEY=
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_PASSWORD=
SMTP_USE_TLS=true
EMAIL_DLQ_MAX_RETRIES=5

# Admin/dispatcher auth
ADMIN_BASIC_USERNAME=admin
ADMIN_BASIC_PASSWORD=change-me
DISPATCHER_BASIC_USERNAME=dispatcher
DISPATCHER_BASIC_PASSWORD=change-me

# Stripe
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_SUCCESS_URL=https://app.example.com/deposit-success?session_id={CHECKOUT_SESSION_ID}
STRIPE_CANCEL_URL=https://app.example.com/deposit-cancelled
STRIPE_INVOICE_SUCCESS_URL=https://app.example.com/invoice/{INVOICE_ID}/paid
STRIPE_INVOICE_CANCEL_URL=https://app.example.com/invoice/{INVOICE_ID}/retry
DEPOSIT_PERCENT=0.25
DEPOSIT_CURRENCY=cad

# Logging
LOG_LEVEL=INFO
SENTRY_DSN=

# Multitenancy / orgs
DEFAULT_ORG_ID=00000000-0000-0000-0000-000000000001
ALLOW_ORG_HEADER=true

# Feature toggles
EXPORT_ENABLE_EMAIL_EVENTS=true
WEBHOOK_VERIFY_SIGNATURES=true
